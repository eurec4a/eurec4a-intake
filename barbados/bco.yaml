plugins:
  source:
    - module: intake_xarray

sources:

  CORAL_LIDAR:
    description: Observations made with the CORAL LIDAR at BCO
    driver: opendap
    args:
      urlpath: https://observations.ipsl.fr/thredds/dodsC/EUREC4A/BARBADOS/BCO/Raman_Lidar_CORAL/lowResolution/version_{{version}}/T{{dt}}min/nc/coral_{{date.strftime("%y%m%d")}}_0002_0000_{{content_type}}.nc
      auth: null
      chunks: null
    parameters:
      version:
        description: dataset version to use
        type: str
        default: 2020.07.27
      date:
        description: date of observation
        default: 2020-01-09
        type: datetime
        min: 2020-01-09
        max: 2020-02-29
      dt:
        description: time resolution
        type: int
        default: 10
        allowed: [10, 20, 60]
      content_type:
        description: dataset-content
        type: str
        default: b
        allowed: [b, t]
    metadata:
      maintainer: Leif Denby <l.c.denby[at]leeds.ac.uk>
      documentation: https://wiki.mpimet.mpg.de/doku.php?id=analysis:data:bco:ramanlidars:raman-lidar-coral
      tags:
        - water-vapour profiles
        - temperature profiles

  surface_meteorology:
    description: Standard meteorological in-situ measurements at the Barbados Cloud Observatory.
    driver: opendap
    args:
      urlpath: https://observations.mpimet.mpg.de/repository/opendap/db17c922-7c72-4883-8038-c8eb6ae65dcd/entry
      auth: null
      chunks: null
      engine: netcdf4

  surface_radiation:
    description: Downwelling radiation measured in-situ at the Barbados Cloud Observatory.
    driver: opendap
    args:
      urlpath: https://observations.mpimet.mpg.de/repository/opendap/ff5d2659-0ef3-4716-a702-7f0799779043/entry
      auth: null
      chunks: null
      engine: netcdf4

  cloud_base_height:
    description: Cloud base height measurements from the ceilometer at the Barbados Cloud Observatory.
    driver: opendap
    args:
      urlpath: https://observations.mpimet.mpg.de/repository/opendap/f921b45b-4857-4ac0-857c-548fc149b5cc/entry
      auth: null
      chunks: null
      engine: netcdf4

# Some int64 in the data might cause an issue
  vertical_velocity:
    description: Profiles of vertical velocity measured with the wind lidar at the Barbados Cloud Observatory.
    driver: opendap
    args:
      urlpath: https://observations.mpimet.mpg.de/repository/opendap/efe0c2f5-9f47-458b-bc0b-16fdbc4b8e19/entry
      auth: null
      chunks: null
      engine: netcdf4

  radar_reflectivity:
    description: Radar reflectivities measured with the Ka-Band radar at the Barbados Cloud Observatory.
    driver: opendap
    args:
      urlpath: https://observations.ipsl.fr/thredds/dodsC/EUREC4A/BARBADOS/BCO/Radar_CORAL/{{version}}/MMCR__MBR2__Spectral_Moments__10s__155m-18km__{{date.strftime("%y%m%d")}}.nc
      auth: null
      chunks: null
      engine: netcdf4
    parameters:
      date:
        description: 'date of observation'
        default: '2020-01-12 00:00'
        type: datetime
        min: '2020-01-12 00:00'
        max: '2020-02-29 23:59'
      version:
        description: "dataset version"
        default: "v2020.10.08"
        type: str
        allowed: ["v2020.10.08"]
